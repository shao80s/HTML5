## 1 介绍

### 1.1 概念

万维网的核心语言、标准通用标记语言下的一个应用超文本标记语言（HTML）的第五次重大修改HTML5 在 HTML4 的基础上增加了很多新特性。
重要的 CSS3 模块包括：选择器、框模型、背景和边框、文本效果、2D/3D 转换、动画、多列布局、用户界面。

HTML5 中的一些有趣的新特性，用于绘画的 canvas 元素、用于媒介回放的 video 和 audio 元素、对本地离线存储的更好的支持、新的特殊内容元素，比如 article、footer、header、nav、section、新的表单控件，比如 calendar、date、time、email、url、search。

### 1.2 历史

标准通用标记语言下的一个应用HTML标准自1999年12月发布的HTML4.01后，后继的HTML5和其它标准被束之高阁，为了推动Web标准化运动的发展，一些公司联合起来，成立了一个叫做 Web Hypertext Application Technology Working Group （Web超文本应用技术工作组 -WHATWG） 的组织。WHATWG 致力于 Web 表单和应用程序，而W3C（World Wide Web Consortium，万维网联盟） 专注于XHTML2.0。在 2006 年，双方决定进行合作，来创建一个新版本的 HTML。

HTML5草案的前身名为 Web Applications 1.0，于2004年被WHATWG提出，于2007年被W3C接纳，并成立了新的 HTML 工作团队。

HTML 5 的第一份正式草案已于2008年1月22日公布。HTML5 仍处于完善之中。然而，大部分现代浏览器已经具备了某些 HTML5 支持。

2012年12月17日，万维网联盟（W3C）正式宣布凝结了大量网络工作者心血的HTML5规范已经正式定稿。根据W3C的发言稿称：“HTML5是开放的Web网络平台的奠基石。”

2013年5月6日， HTML 5.1正式草案公布。该规范定义了第五次重大版本，第一次要修订万维网的核心语言：超文本标记语言（HTML）。在这个版本中，新功能不断推出，以帮助Web应用程序的作者，努力提高新元素互操作性。

本次草案的发布，从2012年12月27日至今，进行了多达近百项的修改，包括HTML和XHTML的标签，相关的API、Canvas等，同时HTML5的图像img标签及svg也进行了改进，性能得到进一步提升。

支持Html5的浏览器包括Firefox（火狐浏览器），IE9及其更高版本，Chrome（谷歌浏览器），Safari，Opera等；国内的遨游浏览器（Maxthon），以及基于IE或Chromium（Chrome的工程版或称实验版）所推出的360浏览器、搜狗浏览器、QQ浏览器、猎豹浏览器等国产浏览器同样具备支持HTML5的能力。

在移动设备开发HTML5应用只有两种方法，要不就是全使用HTML5的语法，要不就是仅使用JavaScript引擎。

JavaScript引擎的构建方法让制作手机网页游戏成为可能。由于界面层很复杂，已预订了一个UI工具包去使用。

纯HTML5手机应用运行缓慢并错漏百出，但优化后的效果会好转。尽管不是很多人愿意去做这样的优化，但依然可以去尝试。

HTML5手机应用的最大优势就是可以在网页上直接调试和修改。原先应用的开发人员可能需要花费非常大的力气才能达到HTML5的效果，不断地重复编码、调试和运行，这是首先得解决的一个问题。因此也有许多手机杂志客户端是基于HTML5标准，开发人员可以轻松调试修改。

2014年10月29日，万维网联盟泪流满面地宣布，经过几乎8年的艰辛努力，HTML5标准规范终于最终制定完成了，并已公开发布。

在此之前的几年时间里，已经有很多开发者陆续使用了HTML5的部分技术，Firefox、Google Chrome、Opera、Safari 4+、Internet Explorer 9+都已支持HTML5，但直到今天，我们才看到“正式版”。

HTML5将会取代1999年制定的HTML 4.01、XHTML 1.0标准，以期能在互联网应用迅速发展的时候，使网络标准达到符合当代的网络需求，为桌面和移动平台带来无缝衔接的丰富内容。

W3C CEO Jeff Jaffe博士表示：“HTML5将推动Web进入新的时代。不久以前，Web还只是上网看一些基础文档，而如今，Web是一个极大丰富的平台。我们已经进入一个稳定阶段，每个人都可以按照标准行事，并且可用于所有浏览器。如果我们不能携起手来，就不会有统一的Web。”

HTML5还有望成为梦想中的“开放Web平台”(Open Web Platform)的基石，如能实现可进一步推动更深入的跨平台Web应用。

接下来，W3C将致力于开发用于实时通信、电子支付、应用开发等方面的标准规范，还会创建一系列的隐私、安全防护措施。

W3C还曾在2012年透露说，计划在2016年底前发布HTML 5.1。

### 1.3 优缺点

**优点**

* 网络标准

	HTML5本身是由W3C推荐出来的，它的开发是通过谷歌、苹果，诺基亚、中国移动等几百家公司一起酝酿的技术，这个技术最大的好处在于它是一个公开的技术。换句话说，每一个公开的标准都可以根据W3C的资料库找寻根源。另一方面，W3C通过的HTML5标准也就意味着每一个浏览器或每一个平台都会去实现。

* 多设备跨平台

	用HTML5的优点主要在于，这个技术可以进行跨平台的使用。比如你开发了一款HTML5的游戏，你可以很轻易地移植到UC的开放平台、Opera的游戏中心、Facebook应用平台，甚至可以通过封装的技术发放到App Store或Google Play上，所以它的跨平台性非常强大，这也是大多数人对HTML5有兴趣的主要原因。

* 自适应网页设计

	很早就有人设想，能不能“一次设计，普遍适用”，让同一张网页自动适应不同大小的屏幕，根据屏幕宽度，自动调整布局（layout）。

	2010年，Ethan Marcotte提出了”自适应网页设计“这个名词，指可以自动识别屏幕宽度、并做出相应调整的网页设计。

	这就解决了传统的一种局面——网站为不同的设备提供不同的网页，比如专门提供一个mobile版本，或者iPhone / iPad版本。这样做固然保证了效果，但是比较麻烦，同时要维护好几个版本，而且如果一个网站有多个portal（入口），会大大增加架构设计的复杂度。

* 即时更新

	游戏客户端每次都要更新，很麻烦。可是更新HTML5游戏就好像更新页面一样，是马上的、即时的更新。

**总结概括HTML5有以下优点：**

- 提高可用性和改进用户的友好体验；

- 有几个新的标签，这将有助于开发人员定义重要的内容；

- 可以给站点带来更多的多媒体元素(视频和音频)；

- 可以很好的替代 FLASH 和 Silverlight ；

- 当涉及到网站的抓取和索引的时候，对于SEO很友好；

- 将被大量应用于移动应用程序和游戏；

- 可移植性好。

**缺点**

该标准并未能很好的被浏览器所支持。因新标签的引入，各浏览器之间将缺少一种统一的数据描述格式，造成用户体验不佳。

### 1.4 已移除的元素

以下的 HTML 4.01 元素在HTML5中已经被删除:


## 2 视频

### 2.1 介绍

直至今天，互联网上的视频大多都是通过插件来显示的，但并非所有浏览器都有同样的插件。HTML5规定了一种通过video元素来包含视频的标准方法，它能够播放声音文件或音频流。video元素支持三种视频格式：Ogg、MPEG、WebM

下面对这三种视频格式做一解释

Ogg ：带有 Theora 视频编码和 Vorbis 音频编码的 Ogg 文件

MPEG4 ：带有 H.264 视频编码和 AAC 音频编码的 MPEG 4 文件

WebM ：带有 VP8 视频编码和 Vorbis 音频编码的 WebM 文件


### 2.2 浏览器支持

Ogg： Firefox3.5+、Opera10.5+、Chrome5.0+

MPEG 4：IE 9+、Chrome5.0+、Safari 3.0+

WebM：Firefox4.0+、Opera10.6+、Chrome6.0+


### 2.3 控制器：control

control属性供添加播放、暂停、音量控件。

### 2.4 标签

`<video>` 定义声音

`<source>`规定多媒体资源，可以是多个

### 2.5 属性

width：宽

height：高

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>
　<video controls=“controls”>
　　<source src=“raw/1.mp4” >
　　<source src="raw/1.ogg" >
您的浏览器不支持</video>
</body>
</html>
```

### 2.6 编解码工具

不是所有浏览器都支持统一格式，因此需要有一款编解码工具转换视频格式，方便开发。

**FFmpeg：**使用广泛，已开源。
官方网址：www.ffmpeg.org

## 3 音频

### 3.1 介绍

直至今天，互联网上的音频大多都是通过插件来播放的，但并非所有浏览器都有同样的插件。HTML5规定了一种通过audio元素来包含音频的标准方法，它能够播放声音文件或音频流。audio元素支持三种音频格式：Ogg Vorbis、MP3、Wav

### 3.2 浏览器支持

MP3：IE 9

Ogg Vorbis： Firefox 3.5、Opera 10.5、Chrome 3.0

Wav： Firefox 3.5、Opera 10.5、Safari 3.0

### 3.3 控制器：control

control属性供添加播放、暂停、音量控件。

### 3.4 标签

`<audio>` 定义声音

`<source>` 规定多媒体资源，可以是多个

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>
　<audio controls=“controls”>您的浏览器不支持
    <source src=“raw/1.mp3” type="audio/mpeg">
    <source src="raw/1.mp3" type="audio/ogg">
</audio>
</body>
</html>
```

## 4 拖放

### 4.1 概念

拖放是一种常见的特性，即抓取对象以后拖到另一个位置。在 HTML5 中，拖放是标准的一部分，任何元素都能够拖放。

### 4.2 浏览器支持
Internet Explorer 9、Firefox、Opera 12、Chrome 以及 Safari 5 支持拖放。

> 注：在 Safari 5.1.2 中不支持拖放。

### 4.3 属性

ondragstar：调用了一个函数，drag(event)，它规定了被拖动的数据

setData()：设置被拖的数据类型和值

ondragover：事件规定在何处放置被拖动的数据

ondrop：当放置被拖数据时，会发生drop事件

例：

```javascript
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
#div1 {width:488px;height:90px;padding:10px;border:1px solid #aaaaaa;}
</style>
<script type="text/javascript">
function allowDrop(ev)
{
ev.preventDefault();
}

function drag(ev)
{
ev.dataTransfer.setData("Text",ev.target.id);
}

function drop(ev)
{
ev.preventDefault();
var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
}
</script>
</head>
<body>

<p>请把 极客学院 的图片拖放到矩形中：</p>

<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br />
<img id="drag1" src="http://s1.jikexueyuan.com/current/static/images/logo.png" draggable="true" ondragstart="drag(event)" />

</body>
</html>
```

## 5 Canvas标签

### 5.1 概念

Canvas 对象表示一个 HTML 画布元素：`<canvas>`。它没有自己的行为，但是定义了一个 API 支持脚本化客户端绘图操作。

你可以直接在该对象上指定宽度和高度，但是，其大多数功能都可以通过CanvasRenderingContext2D 对象获得。 这是通过 Canvas 对象的getContext() 方法并且把直接量字符串 "2d" 作为唯一的参数传递给它而获得的。

### 5.2 创建canvas标签

```javascript
<!DOCTYPE HTML>
<html>
　<head>
　　<style >
　　　.canvas{
　　　　background-color:aqua;
}
　　</style>
　</head>
<body>
<canvas class=“canvas” width=“200px” height=“200px”></canvas>
</body>
</html>
```

canvas 元素本身是没有绘图能力的。所以的绘制工作必须在 JavaScript 内部完成

```javascript
var CANVAS_WIDTH = 200 , CANVAS_HEIGHT = 200;
window.onload = function(){
　createCanvas();
}
function creatCanvas(){
　　document.body.innerHTML = “<canvas id=\”mycanvas\” width=\””+CANVAS_WIDTH+“\” height=\””+CANVAS_HEIGHT+”\”></canwas>”
}
```

### 5.3 利用canvas标签绘制图形

**API文档：**developer.mozilia.org

例：

```javascript
var CANVAS_WIDTH = 200 , CANVAS_HEIGHT = 200;
var mycanvas,context;

window.onload = function(){
　createCanvas();
　drawRect()
}

function creatCanvas(){
　　document.body.innerHTML = “<canvas id=\”mycanvas\” width=\””+CANVAS_WIDTH+“\” height=\””+CANVAS_HEIGHT+”\”></canwas>”
　　mycanvas = document.getElementById(“mycanvas”);
　　context = mycanvas.getContext(“2d”);
}
function drawRect(){
　　context.fillRect(0,0,200,200);
}
```

## 6 SVG

### 6.1 概念

可缩放矢量图形是基于可扩展标记语言（标准通用标记语言的子集），用于描述二维矢量图形的一种图形格式。它由万维网联盟制定，是一个开放标准。

### 6.2 优点

首先简要解释一下矢量图像格式和位图图像格式的区别。矢量图像用点和线来描述物体，所以文件会比较小，同时也能提供高清晰的画面，适合于直接打印或输出。而位图图像的存储单位是图像上每一点的像素值，因此一般的图像文件都很大，会占用大量的网络带宽。SVG是一种矢量图形格式，GIF、JPEG是光栅文件格式。有了两者的概念后，SVG较GIF、JPEG的优势显而易见。

- 任意放缩

	用户可以任意缩放图像显示，而不会破坏图像的清晰度、细节等。

- 文本独立

	SVG图像中的文字独立于图像，文字保留可编辑和可搜寻的状态。也不会再有字体的限制，用户系统即使没有安装某一字体，也会看到和他们制作时完全相同的画面。

- 较小文件

	总体来讲，SVG文件比那些GIF和JPEG格式的文件要小很多，因而下载也很快。

- 超强显示效果

	SVG图像在屏幕上总是边缘清晰，它的清晰度适合任何屏幕分辨率和打印分辨率。

- 超级颜色控制

	SVG图像提供一个1 600万种颜色的调色板，支持ICC颜色描述文件标准、RGB、线X填充、渐变和蒙版。

- 交互X和智能化

	SVG面临的主要问题一个是如何和已经占有重要市场份额的矢量图形格式Flash竞争的问题，另一个问题就是SVG的本地运行环境下的厂家支持程度。

### 6.3 浏览器支持

Internet Explorer 9、Firefox、Opera、Chrome 以及 Safari 支持内联 SVG。

### 6.4 绘制矢量图形

例：

```javascript
<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">
<title></title>
</head>
<body>
<svg width="120" height="120" viewBox="0 0 120 120" version="1.1">
<circle cx="60" cy="60" r="50"></circle>
</svg>
<svg width="120" height="120"
viewPort="0 0 120 120" version="1.1"
xmlns="http://www.w3.org/2000/svg">

<ellipse cx="60" cy="60" rx="50" ry="25"/>

</svg>

<svg width="120" height="120" viewBox="0 0 120 120"
xmlns="http://www.w3.org/2000/svg" version="1.1"
xmlns:xlink="http://www.w3.org/1999/xlink" >

<!-- Draw the outline of the motion path in grey, along
with 2 small circles at key points -->
<path d="M10,110 A120,120 -45 0,1 110 10 A120,120 -45 0,1 10,110"
stroke="lightgrey" stroke-width="2"
fill="none" id="theMotionPath"/>
<circle cx="10" cy="110" r="3" fill="lightgrey" />
<circle cx="110" cy="10" r="3" fill="lightgrey" />

<!-- Here is a red circle which will be moved along the motion path. -->
<circle cx="" cy="" r="5" fill="red">

<!-- Define the motion path animation -->
<animateMotion dur="6s" repeatCount="indefinite">
<mpath xlink:href="#theMotionPath"/>
</animateMotion>
</circle>
</svg>

<svg width="120" height="120"
viewPort="0 0 120 120" version="1.1"
xmlns="http://www.w3.org/2000/svg">

<rect x="10" y="10" width="100" height="100">
<animate attributeType="XML"
attributeName="x"
from="-100" to="120"
dur="10s"
repeatCount="indefinite"/>
</rect>

</svg>
</body>
</html>
```

### 6.5 引入外部SVG文件

例：

```javascript
<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">
<title></title>
</head>
<body>
<iframe src="svg.svg" width="1000" height="1000" frameborder="no"></iframe>
</body>
</html>
```

## 7 地理定位

### 7.1概念

HTML5 Geolocation（地理定位）用于定位用户的位置

### 7.2浏览器支持

Internet Explorer 9、Firefox、Chrome、Safari 以及 Opera 支持地理定位。

> 注：对于拥有 GPS 的设备，比如 iPhone，地理定位更加精确。

### 7.3 使用Geolocation API

运行原理：判断浏览器是否支持Geolocation，如果支持，则运行 getCurrentPosition() 方法。如果不支持，则向用户显示一段消息。

例：

```javascript
<!DOCTYPE html>
<html>
<body>
<p id="demo">点击这个按钮，获得您的坐标：</p>
<button onclick="getLocation()">试一下</button>
<script>
var x=document.getElementById("demo");
function getLocation()
{
if (navigator.geolocation)
{
navigator.geolocation.getCurrentPosition(showPosition,showError);
}
else{x.innerHTML="Geolocation is not supported by this browser.";}
}
function showPosition(position)
{
x.innerHTML="Latitude: " + position.coords.latitude +
"<br />Longitude: " + position.coords.longitude;
}
function showError(error)
{
switch(error.code)
{
case error.PERMISSION_DENIED:
x.innerHTML="User denied the request for Geolocation."
break;
case error.POSITION_UNAVAILABLE:
x.innerHTML="Location information is unavailable."
break;
case error.TIMEOUT:
x.innerHTML="The request to get user location timed out."
break;
case error.UNKNOWN_ERROR:
x.innerHTML="An unknown error occurred."
break;
}
}
</script>
</body>
</html>
```

## 8 Web储存

### 8.1 概念及优缺点

**概念:**

Web Storage实际上由两部分组成：sessionStorage与localStorage。 sessionStorage用于本地存储一个会话（session）中的数据，这些数据只有在同一个会话中的页面才能访问并且当会话结束后数据也随之销毁。因此sessionStorage不是一种持久化的本地存储，仅仅是会话级别的存储。 localStorage用于持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的。

**优点：**

- 存储空间

存储空间 更大：IE8下每个独立的存储空间为10M，其他浏览器实现略有不同，但都比Cookie要大很多。

- 服务器

存储内容不会发送到服务器：当设置了Cookie后，Cookie的内容会随着请求一并发送的服务器，这对于本地存储的数据是一种带宽浪费。而Web Storage中的数据则仅仅是存在本地，不会与服务器发生任何交互。

- 接口

更多丰富易用的接口：Web Storage提供了一套更为丰富的接口，使得数据操作更为简便。

- 存储空间

独立的存储空间：每个域（包括子域）有独立的存储空间，各个存储空间是完全独立的，因此不会造成数据混乱。

### 8.2 localStroage

没有时间限制的数据存储

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<script type="text/javascript">

if (localStorage.pagecount)
{
localStorage.pagecount=Number(localStorage.pagecount) +1;
}
else
{
localStorage.pagecount=1;
}
document.write("Visits: " + localStorage.pagecount + " time(s).");

</script>

<p>刷新页面会看到计数器在增长。</p>

<p>请关闭浏览器窗口，然后再试一次，计数器会继续计数。</p>

</body>
</html>
```

### 8.3 sessionStroage

针对一个session的数据储存，当浏览器关闭，数据会被删除。

例：

```javascript

<!DOCTYPE HTML>
<html>
<body>

<script type="text/javascript">

sessionStorage.lastname="Potter";
document.write(sessionStorage.lastname);

</script>

</body>
</html>
```

## 9 应用缓存

### 9.1 概念

每个web应用的资源仓库用它自己的应用缓存。因为应用程序可以共享资源(甚至同一个仓库URI)，每一个应用的缓存有一个单独的所有资源的拷贝。这些缓存是有版本号标识的；每次web 应用程序被在线访问时，如果发生了更新，一个应用程序的新版本号被同步到应用缓存中。这个新版本号会在下一次访问这个站点的时候被使用。

### 9.2 优点

- 离线浏览-用户可在应用离线时使用它们

- 速度-已缓存资源加载得更快

- 减少服务器负载-浏览器将只从服务器下载更新过或更改过的资源。

### 9.3 浏览器支持

所有主流浏览器均支持应用程序缓存，除了 Internet Explorer。

### 9.4 实现缓存

如需启用应用程序缓存，请在文档的<html>标签中包含 manifest 属性
manifest 文件的建议文件扩展名为：”.appcache"

**Cache Manifest 基础**

Cache是一种缓存的机制。它可以通过一个 .manifest 文件来配置需要缓存的或者一定要保持联网缓存的文件。

MIME TYPE：text/cache-manifest

需要由你创建的：NAME.manifest

作用：主要是配置需要缓存的文件

### 9.5 Manifest 文件

manifest 文件是简单的文本文件，它告知浏览器被缓存的内容（以及不缓存的内容）。

**manifest 文件可分为三个部分**

CACHE MANIFEST - 在此标题下列出的文件将在首次下载后进行缓存

NETWORK - 在此标题下列出的文件需要与服务器的连接，且不会被缓存

FALLBACK - 在此标题下列出的文件规定当页面无法访问时的回退页面（比如 404 页面）

**CACHE MANIFEST**

第一行，CACHE MANIFEST：

CACHE MANIFEST

上面的 manifest 文件列出了三个资源：一个 CSS 文件，一个 JS文件，以及一个 HTML 文件。当 manifest 文件加载后，浏览器会从网站的根目录下载这三个文件。然后，无论用户何时与因特网断开连接，这些资源依然是可用的。

**NETWORK**

下面的 NETWORK 小节规定文件 "login.asp" 永远不会被缓存，且离线时是不可用的：

NETWORK:

login.asp

可以使用星号来指示所有其他资源/文件都需要因特网连接：

NETWORK:
*

FALLBACK

下面的 FALLBACK 小节规定如果无法建立因特网连接，则用 "offline.html" 替代 /html5/ 目录中的所有文件：

FALLBACK:
/html5/ /404.html

> 注：第一个 URI 是资源，第二个是替补。

## 9.6 更新缓存

一旦应用被缓存，它就会保持缓存直到发生下列情况：

用户清空浏览器缓存

manifest 文件被修改（参阅下面的提示）

由程序来更新应用缓存

## 9.7 完整的 Manifest 文件

```javascript
CACHE MANIFEST

# 2012-02-21 v1.0.0
/style.css
/index.js
/index.html

NETWORK:
login.asp

FALLBACK:
/html5/ /404.html
```

## 10 Web Workers

### 10.1 概念

当在HTML页面中执行脚本时，页面的状态是不可响应的，直到脚本已完成。web worker是运行在后台的JavaScript，独立于其他脚本，不会影响页面的性能。您可以继续做任何愿意做的事情：点击、选取内容等等，而此时web worker在后台运行。

原理就是在当前javascript的主线程中，使用Worker类加载一个javascript文件来开辟一个新的线程，起到互不阻塞执行的效果，并且提供主线程和新线程之间数据交换的接口：postMessage，onmessage。

### 10.2 浏览器支持

所有主流浏览器均支持 web worker，除了 Internet Explorer。

### 10.3 检测浏览器支持

### 10.4 方法

postMessage() 用于向HTML页面传回一段消息

terminate（） 终止web worker，并释放浏览器/计算机资源


### 10.4 创建webworker文件

例：创建count.js脚本，用于计数

```javascript
var countNum = 0;
function count(){
　postMessage(countNum);
　countNum++;
　setTimeout(count,1000);
}

创建脚本index.js，用于处理count.js所返回的内容，并更新主UI
var  numDiv
window.onload = function(){
　numDiv = document.getElementById(“numDiv”);
　var work = new Worker(“count.js");
　work.onmessage = function(e){
　　numDiv.innerHTML = e.data;
　}
}

在HTML文件中引入
<!DOCTYPE html>
<html>
<head>
　<script src=“index.js”></script>
</head>
<body>
　<div id=“numDiv”>0</div>
</body>
</html>
```

## 11 服务器推送事件

### 11.1 概念

指的是网页自动获取来自服务器的更新。从前网页需要询问是否有可用的更新才能做到这一点，，通过服务器推送时间，可以自动到达

### 11.2 浏览器支持

所有主流浏览器均支持服务器发送事件，除了 Internet Explorer。

### 11.3 接收 Server-Sent 事件通知

EventSource 对象用于接收服务器发送事件通知

例：

创建一个新的 EventSource 对象，然后规定发送更新的页面的 URL（本例中是 "demo_sse.php"）

每接收到一次更新，就会发生 onmessage 事件
当 onmessage 事件发生时，把已接收的数据推入 id 为 "result" 的元素中

```javascript
<!DOCTYPE html>
<html>
<body>
<h1>获得服务器更新</h1>
<div id="result"></div>

<script>
if(typeof(EventSource)!=="undefined")
{
var source=new EventSource("/example/html5/demo_sse.php");
source.onmessage=function(event)
{
document.getElementById("result").innerHTML+=event.data + "<br />";
};
}
else
{
document.getElementById("result").innerHTML="Sorry, your browser does not support server-sent events...";
}
</script>

</body>
</html>
```

### 11.4 检测 Server-Sent 事件支持

例：上面的实例编写了一段额外的代码来检测服务器发送事件的浏览器支持情况：

```javascript
if(typeof(EventSource)!=="undefined")
{
// Yes! Server-sent events support!
// Some code.....
}
else
{
// Sorry! No server-sent events support..
}
```

## 12 表单

### 12.1 概念

表单在网页中主要负责数据采集功能。一个表单有三个基本组成部分： 表单标签：这里面包含了处理表单数据所用CGI程序的URL以及数据提交到服务器的方法。 表单域：包含了文本框、密码框、隐藏域、多行文本框、复选框、单选框、下拉选择框和文件上传框等。 表单按钮：包括提交按钮、复位按钮和一般按钮；用于将数据传送到服务器上的CGI脚本或者取消输入，还可以用表单按钮来控制其他定义了处理脚本的处理工作。

### 12.2 input输入类型：email

email 类型用于应该包含 e-mail 地址的输入域。

在提交表单时，会自动验证 email 域的值。

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<form action="/example/html5/demo_form.asp" method="get">
E-mail: <input type="email" name="user_email" /><br />
<input type="submit" />
</form>

</body>
</html>
```

### 12.3 input输入类型：url

url 类型用于应该包含 URL 地址的输入域。

在提交表单时，会自动验证 url 域的值。

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<form action="/example/html5/demo_form.asp" method="get">
Homepage: <input type="url" name="user_url" /><br />
<input type="submit" />
</form>

</body>
</html>
```

### 12.4 Input输入类型：number

number 类型用于应该包含数值的输入域。

你还能够设定对所接受的数字的限定：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<form action="/example/html5/demo_form.asp" method="get">
Points: <input type="number" name="points" min="1" max="10" />
<input type="submit" />
</form>

</body>
</html>
```

> 注：可用max、min、step、value来规定对数字类型的限定

### 12.5 Input输入类型：range

range 类型用于应该包含一定范围内数字值的输入域。

range 类型显示为滑动条。

还能够设定对所接受的数字的限定：

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<form action="/example/html5/demo_form.asp" method="get">
Points: <input type="range" name="points" min="1" max="10" />
<input type="submit" />
</form>

</body>
</html>
```

### 12.6 Input输入类型：Date Pickers（日期选择器）

HTML5 拥有多个可供选取日期和时间的新输入类型：

date - 选取日、月、年

month - 选取月、年

week - 选取周和年

time - 选取时间（小时和分钟）

datetime - 选取时间、日、月、年（UTC 时间）

datetime-local - 选取时间、日、月、年（本地时间）

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<form action="/example/html5/demo_form.asp" method="get">
Date: <input type="date" name="user_date" />
<input type="submit" />
</form>

</body>
</html>
```

### 12.7 Input输入类型：search

search 类型用于搜索域，比如站点搜索或 Google 搜索。

search 域显示为常规的文本域。

### 12.8 表单元素：datalist

datalist 元素规定输入域的选项列表。

列表是通过 datalist 内的 option 元素创建的。

如需把 datalist 绑定到输入域，请用输入域的 list 属性引用 datalist 的 id：

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<form action="/example/html5/demo_form.asp" method="get">
Webpage: <input type="url" list="url_list" name="link" />
<datalist id="url_list">
<option label="jikexueyuan" value="http://www.jikexueyuan.com" />
<option label="Google" value="http://www.google.com" />
<option label="Microsoft" value="http://www.microsoft.com" />
</datalist>
<input type="submit" />
</form>

</body>
</html>
```

### 12.9 表单元素：datalist

keygen 元素的作用是提供一种验证用户的可靠方法。

keygen 元素是密钥对生成器（key-pair generator）。当提交表单时，会生成两个键，一个是私钥，一个公钥。

私钥（private key）存储于客户端，公钥（public key）则被发送到服务器。公钥可用于之后验证用户的客户端证书（client certificate）。

目前，浏览器对此元素的糟糕的支持度不足以使其成为一种有用的安全标准。

例：

```javascript
<!DOCTYPE HTML>
<html>
<body>

<form action="/example/html5/demo_form.asp" method="get">
Username: <input type="text" name="usr_name" />
Encryption: <keygen name="security" />
<input type="submit" />
</form>

</body>
</html>
```

### 12.10 表单元素：output

output元素用于不同类型的输出，比如计算或脚本输出

```javascript
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
function resCalc()
{
numA=document.getElementById("num_a").value;
numB=document.getElementById("num_b").value;
document.getElementById("result").value=Number(numA)+Number(numB);
}
</script>
</head>
<body>
<p>使用 output 元素的简易计算器：</p>
<form onsubmit="return false">
<input id="num_a" /> +
<input id="num_b" /> =
<output id="result" onforminput="resCalc()"></output>
</form>

</body>
</html>
```

### 12.11 表单属性：autocomplete

autocomplete 属性规定 form 或 input 域应该拥有自动完成功能。

当用户在自动完成域中开始输入时，浏览器应该在该域中显示填写的选项。

提示: autocomplete 属性有可能在 form元素中是开启的，而在input元素中是关闭的。

> 注: autocomplete 适用于 <form> 标签，以及以下类型的 <input> 标签: text, search, url, telephone, email, password, datepickers, range 以及 color。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php" autocomplete="on">
First name:<input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
E-mail: <input type="email" name="email" autocomplete="off"><br>
<input type="submit">
</form>

<p>填写并提交表单，然后重新刷新页面查看如何自动填充内容。</p>
<p>注意 form的 autocomplete属性为 "on"（开），但是e-mail自动为“off”（关）。</p>

</body>
</html>
```

### 12.2 表单属性：novalidate

novalidate 属性的一个boolean 属性.

novalidate 属性规定在提交表单时不应该验证 form 或 input 域。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php" novalidate>
E-mail: <input type="email" name="user_email">
<input type="submit">
</form>

<p><strong>Note:</strong> The novalidate attribute of the form tag is not supported in Internet Explorer 9 and earlier versions, or in Safari.</p>

</body>
</html>
```

### 12.3 新的input属性：autocomplete

autocomplete 属性规定 form 或 input 域应该拥有自动完成功能。
当用户在自动完成域中开始输入时，浏览器应该在该域中显示填写的选项。
提示: autocomplete 属性有可能在 form元素中是开启的，而在input元素中是关闭的。

> 注意: autocomplete 适用于 `<form> `标签，以及以下类型的 `<input> `标签：text, search, url, telephone, email, password, datepickers, range 以及 color。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php" autocomplete="on">
First name:<input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
E-mail: <input type="email" name="email" autocomplete="off"><br>
<input type="submit">
</form>

<p>填写并提交表单，然后重新刷新页面查看如何自动填充内容。</p>
<p>注意 form的 autocomplete属性为 "on"（开），但是e-mail自动为“off”（关）。</p>

</body>
</html>
```

### 12.4 新的input属性：autofocus

autofocus 属性是一个 boolean 属性，规定在页面加载时，域自动地获得焦点。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
First name: <input type="text" name="fname" autofocus><br>
Last name: <input type="text" name="lname"><br>
<input type="submit">
</form>
<p><strong>注意：</strong> Internet Explorer 9及更早IE版本不支持input标签的 autofocus 属性。</p>

</body>
</html>
```

### 12.5 新的input属性：form

form 属性规定输入域所属的一个或多个表单。

> 提示:如需引用一个以上的表单，请使用空格分隔的列表。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php" id="form1">
First name: <input type="text" name="fname"><br>
<input type="submit" value="Submit">
</form>

<p> "Last name" 字段没有在form表单之内，但它也是form表单的一部分。</p>

Last name: <input type="text" name="lname" form="form1">

<p><b>注意:</b> IE不支持form属性</p>

</body>
</html>
```

### 12.6 新的input属性：formaction

The formaction 属性用于描述表单提交的URL地址，会覆盖`<form>`元素中的action属性.

> 注意: The formaction 属性用于 type="submit" 和 type="image".

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
First name: <input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
<input type="submit" value="Submit"><br>
<input type="submit" formaction="demo-admin.php" value="Submit as admin">
</form>
<p><strong>注意：</strong> Internet Explorer 9及更早IE版本不支持input标签的 formaction 属性。</p>

</body>
</html>
```

### 12.7 新的input属性：formenctype

formenctype 属性描述了表单提交到服务器的数据编码 (只对form表单中 method="post" 表单)

formenctype 属性覆盖 form 元素的 enctype 属性。

主要: 该属性与 type="submit" 和 type="image" 配合使用。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-post-enctype.php" method="post">
First name: <input type="text" name="fname"><br>
<input type="submit" value="Submit">
<input type="submit" formenctype="multipart/form-data" value="Submit as Multipart/form-data">
</form>

<p><strong>注意：</strong> Internet Explorer 9及更早IE版本不支持input标签的 formenctype 属性。</p>

</body>
</html>
```


### 12.8 新的input属性：formmethod

formmethod 属性定义了表单提交的方式，它覆盖了 `<form>` 元素的的method 属性。

> 注: 该属性可以与 type="submit" 和 type="image" 配合使用。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php" method="get">
First name: <input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
<input type="submit" value="Submit">
<input type="submit" formmethod="post" formaction="demo-post.php" value="Submit using POST">
</form>

<p><strong>注意：</strong> Internet Explorer 9及更早IE版本不支持input标签的 formmethod 属性。</p>

</body>
</html>
```

### 12.9 新的input属性：formnovalidate

novalidate 属性是一个 boolean 属性，它描述了`<input>` 元素在表单提交时无需被验证。

formnovalidate 属性会覆盖 `<form>` 元素的novalidate属性.
注意: formnovalidate 属性与type="submit一起使用

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php" method="get">
First name: <input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
<input type="submit" value="Submit">
<input type="submit" formmethod="post" formaction="demo-post.php" value="Submit using POST">
</form>

<p><strong>注意：</strong> Internet Explorer 9及更早IE版本不支持input标签的 formmethod 属性。</p>

</body>
</html>
```

### 12.10 新的input属性：formtarget

formtarget 属性指定一个名称或一个关键字来指明表单提交数据接收后的展示。

The formtarget 属性覆盖`<form>`元素的target属性.

> 注: formtarget 属性与type="submit" 和 type="image"配合使用.

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
First name: <input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
<input type="submit" value="Submit as normal">
<input type="submit" formtarget="_blank" value="提交到一个新的页面上">
</form>

<p><strong>注意：</strong> Internet Explorer 9及更早IE版本不支持input标签的 formtarget 属性。</p>

</body>
</html>
```

### 12.11 新的input属性：height 和 width 

height 和 width 属性规定用于 image 类型的`<input>` 标签的图像高度和宽度。

> 注: height 和 width 属性只适用于 image 类型的`<input>` 标签。

> 提示:图像通常会同时指定高度和宽度属性。如果图像设置高度和宽度，图像所需的空间 在加载页时会被保留。如果没有这些属性， 浏览器不知道图像的大小，并不能预留 适当的空间。图片在加载过程中会使页面布局效果改变 （尽管图片已加载）。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
First name: <input type="text" name="fname"><br>
Last name: <input type="text" name="lname"><br>
<input type="image" src="img_submit.gif" alt="Submit" width="48" height="48">
</form>


</body>
</html>
```

### 12.12 新的input属性：list 

list 属性规定输入域的 datalist。datalist 是输入域的选项列表。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php" method="get">
<input list="browsers" name="browser">
<datalist id="browsers">
<option value="Internet Explorer">
<option value="Firefox">
<option value="Chrome">
<option value="Opera">
<option value="Safari">
</datalist>
<input type="submit">
</form>

<p><strong>注意:</strong> Internet Explorer 9（更早IE版本），Safari不支持 datalist 标签。</p>

</body>
</html>
```

### 12.13 新的input属性：min 和 max 

min、max 和 step 属性用于为包含数字或日期的 input 类型规定限定（约束）。

>　注: min、max 和 step 属性适用于以下类型的 `<input>` 标签：date pickers、number 以及 range。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">

输入 1980-01-01 之前的日期:
<input type="date" name="bday" max="1979-12-31"><br>

输入 2000-01-01 之后的日期:
<input type="date" name="bday" min="2000-01-02"><br>

数量 (在1和5之间):
<input type="number" name="quantity" min="1" max="5"><br>

<input type="submit">
</form>

<p><strong>注意:</strong> Internet Explorer 9及更早IE版本，Firefox不支持input标签的 max 和 min 属性。</p>
<p><strong>注意:</strong>
在Internet Explorer 10中max 和 min属性不支持输入日期和时间，IE 10 不支持这些输入类型。</p>

</body>
</html>
```

### 12.14 新的input属性：multiple 

multiple 属性是一个 boolean 属性，规定`<input>` 元素中可选择多个值。

＞ 注: multiple 属性适用于以下类型的 `<input>` 标签：email 和 file。: email, and file.

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
选择图片: <input type="file" name="img" multiple>
<input type="submit">
</form>

<p>尝试选取一张或者多种图片。</p>

<p><strong>注意:</strong> Internet Explorer 9及更早IE版本不支持input标签的 multiple 属性。</p>

</body>
</html>
```

### 12.15 新的input属性：pattern

pattern 属性描述了一个正则表达式用于验证 `<input>` 元素的值。

> 注:pattern 属性适用于以下类型的 `<input>` 标签: text, search, url, tel, email, 和 password.

> 提示：是用来全局 title 属性描述了模式.

例：
```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
Country code: <input type="text" name="country_code" pattern="[A-Za-z]{3}" title="Three letter country code">
<input type="submit">
</form>

<p><strong>注意:</strong> Internet Explorer 9及更早IE版本，或Safari不支持input标签的 pattern 属性。</p>

</body>
</html>
```

### 12.16 新的input属性： placeholder

placeholder 属性提供一种提示（hint），描述输入域所期待的值。
简短的提示在用户输入值前会显示在输入域上。

> 注: placeholder 属性适用于以下类型的 <input> 标签：text, search, url, telephone, email 以及 password。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
<input type="text" name="fname" placeholder="First name"><br>
<input type="text" name="lname" placeholder="Last name"><br>
<input type="submit" value="Submit">
</form

<p><strong>注：</strong> Internet Explorer 9及更早IE版本不支持input标签的 placeholder 属性。</p>

</body>
</html>
```

### 12.17 新的input属性：required

required 属性是一个 boolean 属性.

required 属性规定必须在提交之前填写输入域（不能为空）。

> 注:required 属性适用于以下类型的 `<input>` 标签：text, search, url, telephone, email, password, date pickers, number, checkbox, radio 以及 file。

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
Username: <input type="text" name="usrname" required>
<input type="submit">
</form>

<p><strong>注意：</strong> Internet Explorer 9及更早IE版本，或Safari不支持input标签的 required 属性。</p>

</body>
</html>
```

### 12.18 新的input属性：step

step 属性为输入域规定合法的数字间隔。

如果 step="3"，则合法的数是 -3,0,3,6 等

> 提示:step 属性可以与 max 和 min 属性创建一个区域值.

> 注意:step 属性与以下type类型一起使用: number, range, date, datetime, datetime-local, month, time 和 week.

例：

```javascript
<!DOCTYPE html>
<html>
<body>

<form action="demo-form.php">
<input type="number" name="points" step="3">
<input type="submit">
</form>

<p><strong>注：</strong> Internet Explorer 9及更早IE版本，或Firefox不支持input标签的 step 属性。</p>

</body>
</html>
```
